@{
	var post = Body.GetPostInfo();
	var frontMatter = post.FrontMatter;

	var title = GetTitle();

	var series = post.FindInSeries();
}

@if (!string.IsNullOrWhiteSpace(title))
{
	<h2 class="post-title">@title</h2>

	var published = frontMatter.Date;
	<div class="post-date">@published.ToString("MMMM dd, yyyy")</div>

	var updated = frontMatter.LastUpdated;
	if (updated > published)
	{
		<div class="post-update-date">(Updated: @updated.ToString("dd MMM yyyy"))</div>
	}

	<div class="post-tags">
		@foreach (var tag in (frontMatter.Tags ?? Array.Empty<string>()).Order())
		{
			<a href="@Posts.TagUrl(tag)" class="post-tag badge">@tag</a>
		}
	</div>
}

@foreach (var note in frontMatter.Notes ?? [])
{
	<div class="editors-note alert @(!string.IsNullOrEmpty(note.Type) ? "alert-" + note.Type : "")">
		@await RenderMarkdown(note.Text)
		@if (note.Date != default)
		{
			<div class="date">@note.Date.ToString("MMM dd, yyyy")</div>
		}
	</div>
}

@if (!series.IsEmpty)
{
	<div class="series-prev">
		This post is part of the series <a class="series-title" href="@Posts.SeriesUrl(series.Key)">@series.Title</a>.
		@if (series.HasPrevious)
		{
			<text>It follows <a href="@UrlTo(series.Previous.Page)">@series.Previous.PageTitle</a>.</text>
		}
	</div>
}

@await RenderBody()

@if (!series.IsEmpty)
{
	<div class="series-next">
		This post is part of the series <a class="series-title" href="@Posts.SeriesUrl(series.Key)">@series.Title</a>.
		@if (series.HasNext)
		{
			<text>The next part is <a href="@UrlTo(series.Next.Page)">@series.Next.PageTitle</a>.</text>
		}
	</div>
}